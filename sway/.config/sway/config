#####################################################################################################################
#################                              Define modifier key(s)                               #################
#####################################################################################################################

# Mod1	=	Alt Key
# Mod4	=	Super/Windows Key

set $priMod	Mod4
set $secMod	Mod1

#####################################################################################################################
#################                                Define variables                                   #################
#####################################################################################################################

# Default mode
set $def	default

# Named Workspaces
set $ws1 	"1"
set $ws2 	"2"
set $ws3 	"3"
set $ws4 	"4"
set $ws5 	"5"
set $ws6 	"6"
set $ws7 	"7"
set $ws8 	"8"
set $ws9 	"9"
set $ws10 	"10"

# Fonts
set $fontMono		pango:Fira Mono

#####################################################################################################################
#################                                   Appearance                                      #################
#####################################################################################################################

# Wallpaper
output * bg $HOME/Pictures/Wallpapers/default.png fill

# Font (default unless specified elsewhere)
font	$fontMono	14

# Gaps
gaps	inner 10
gaps	outer 2

# Borders
default_border				pixel 2
default_floating_border		pixel 2

# Colors
set $bg		#282c34
set $fg		#abb2bf
set $accent	#528bff
set $red	#eb6e67
set $green	#95ee8f
set $yellow	#f8c456
set $blue	#6eaafb
set $purple	#c678dd
set $cyan	#6cdcf7
set $text	#dfdfdf

# class                 border		background		text		indicator		child_border
client.focused          $cyan		$bg				$text 		$cyan			$cyan
client.focused_inactive $blue		$bg				$fg			$blue			$blue
client.unfocused        $accent		$bg				$fg			$accent			$accent
client.urgent           $red		$bg				$text		$red			$red

#####################################################################################################################
#################                                     Display                                       #################
#################           Configure your kanshi profiles in $HOME/.config/kanshi/config           #################
#####################################################################################################################

# runs kanshi after switching to clamshell mode
bindswitch --reload --locked lid:on		exec_always "kanshictl switch clamshell_asus || kanshictl switch clamshell_acer || systemctl suspend"
bindswitch --reload --locked lid:off	exec_always "systemctl restart --user kanshi.service"

#####################################################################################################################
#################                                      Keybinds                                     #################
#################     Keybinds for applications only. Window and container binds will be later.     #################
#####################################################################################################################

# Lock screen
bindsym $priMod+l		exec swaylock

# Kill focused window
bindsym $priMod+q		kill

# Start terminal
bindsym $priMod+Return	exec alacritty

# Start file explorer
bindsym $priMod+e		exec thunar

# Start launcher
bindsym $priMod+space	exec --no-startup-id "$HOME/.config/rofi/scripts/launcher_t3"

# Start powermenu
bindsym $priMod+BackSpace exec --no-startup-id "$HOME/.config/rofi/scripts/powermenu_t1"

# Start browser
bindsym $priMod+j		exec "flatpak run io.gitlab.librewolf-community"

# Start ide
bindsym $priMod+i		exec codium

# Screen brightness controls
bindsym XF86MonBrightnessUp		exec --no-startup-id "brightnessctl set +5%"
bindsym XF86MonBrightnessDown	exec --no-startup-id "brightnessctl set 5%-"

# Fine screen brightness controls
bindsym control+XF86MonBrightnessUp		exec --no-startup-id "brightnessctl set +1%"
bindsym control+XF86MonBrightnessDown	exec --no-startup-id "brightnessctl set 1%-"

# Launcher fallback
#bindsym $secMod+space 	exec --no-startup-id "rofi -modi drun,run -show drun -icon-theme \\"Papirus\\" -show-icons"

# Use pactl to adjust volume in PulseAudio.
bindsym XF86AudioRaiseVolume	exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10%
bindsym XF86AudioLowerVolume	exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10%
bindsym XF86AudioMute			exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute		exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle


#####################################################################################################################
#################                                 Window Switching                                  #################
#####################################################################################################################

# Move focused window
bindsym $priMod+Shift+j		move left
bindsym $priMod+Shift+l		move right
bindsym $priMod+Shift+i		move up
bindsym $priMod+Shift+k		move down

# Move focused window with cursor keys
bindsym $priMod+Shift+Right	exec --no-startup-id $HOME/.config/sway/scripts/move_window.sh next
bindsym $priMod+Shift+Left	exec --no-startup-id $HOME/.config/sway/scripts/move_window.sh prev
bindsym $priMod+Shift+Up	move up
bindsym $priMod+Shift+Down	move down

#####################################################################################################################
#################                                Workspace Switching                                #################
#####################################################################################################################

# Switch to workspace
bindsym $priMod+control+1	workspace number $ws1
bindsym $priMod+control+2	workspace number $ws2
bindsym $priMod+control+3	workspace number $ws3
bindsym $priMod+control+4	workspace number $ws4
bindsym $priMod+control+5	workspace number $ws5
bindsym $priMod+control+6	workspace number $ws6
bindsym $priMod+control+7	workspace number $ws7
bindsym $priMod+control+8	workspace number $ws8
bindsym $priMod+control+9	workspace number $ws9
bindsym $priMod+control+0	workspace number $ws10

# Switch to workspaces using arrow keys; create workspace if it doesn't exist
bindsym $priMod+control+l		exec --no-startup-id $HOME/.config/sway/scripts/move_workspace.sh next
bindsym $priMod+control+j		exec --no-startup-id $HOME/.config/sway/scripts/move_workspace.sh prev

# Switch to workspaces using cursor keys; create workspace if it doesn't exist
bindsym $priMod+control+Right	exec --no-startup-id $HOME/.config/sway/scripts/move_workspace.sh next
bindsym $priMod+control+Left	exec --no-startup-id $HOME/.config/sway/scripts/move_workspace.sh prev

#####################################################################################################################
#################                                   Window Focus                                    #################
#####################################################################################################################

# Change focus
# bindsym $priMod+j		focus left
# bindsym $priMod+i		focus up
# bindsym $priMod+k		focus down
# bindsym $priMod+l		focus right

# Change focus with cursor keys
bindsym $priMod+Left	focus left
bindsym $priMod+Down	focus down
bindsym $priMod+Up		focus up
bindsym $priMod+Right	focus right

#####################################################################################################################
#################                                  Window Layouts                                   #################
#####################################################################################################################

# Split windows horizontally
bindsym $priMod+h		split h

# Split windows vertically
bindsym $priMod+v		split v

# Toggle fullscreen
bindsym $priMod+f		fullscreen toggle

#	Container Layout	#

# Change container layout (stacked, tabbed, toggle split)
bindsym $priMod+y layout stacking
bindsym $priMod+t layout tabbed
bindsym $priMod+s layout splith
bindsym $priMod+u layout toggle 

# Toggle tiling / floating
bindsym $priMod+Shift+space floating toggle

# Change focus between tiling / floating windows
#bindsym $priMod+Space focus mode_toggle

# Focus the parent container
bindsym $priMod+a focus parent

# Focus the child container
#bindsym $priMod+d focus child

bindsym $priMod+r mode "resize"
bindsym $priMod+m mode "move"

#####################################################################################################################
#################                                       Modes                                       #################
#####################################################################################################################

# Resize Mode
mode "resize" {
	# Key				Operation	Property
	#---------------------------------------------#
	# left 	or 	j		shrink		window width
	# right	or 	l		grow		window width
	# up 	or 	i		shrink		window height
	# down 	or 	k		grow		window height
	
	# Resize window
	bindsym j		resize	shrink	width	10 px or 10 ppt
	bindsym k		resize	grow	height	10 px or 10 ppt
	bindsym i		resize	shrink	height	10 px or 10 ppt
	bindsym l		resize	grow	width	10 px or 10 ppt

	# Resize window with cursor keys
	bindsym Left	resize	shrink	width	10 px or 10 ppt
	bindsym Down	resize	grow	height	10 px or 10 ppt
	bindsym Up		resize	shrink	height	10 px or 10 ppt
	bindsym Right	resize	grow	width	10 px or 10 ppt

	# Return to default
	bindsym Escape				mode $def
	bindsym $priMod+r			mode $def
	bindsym q					mode $def
}

# Movement Mode
mode "move" {
	# Move focused window to workspace
	bindsym $priMod+control+1		move window to workspace number $ws1
	bindsym $priMod+control+2		move window to workspace number $ws2
	bindsym $priMod+control+3		move window to workspace number $ws3
	bindsym $priMod+control+4		move window to workspace number $ws4
	bindsym $priMod+control+5		move window to workspace number $ws5
	bindsym $priMod+control+6		move window to workspace number $ws6
	bindsym $priMod+control+7		move window to workspace number $ws7
	bindsym $priMod+control+8		move window to workspace number $ws8
	bindsym $priMod+control+9		move window to workspace number $ws9
	bindsym $priMod+control+0		move window to workspace number $ws10
	
	# Return to default
	bindsym Escape					mode $def
	bindsym $priMod+m				mode $def
	bindsym q						mode $def
}

#####################################################################################################################
#################                                        Bar                                        #################
#####################################################################################################################

bar swaybar_command waybar

#####################################################################################################################
#################                             Reload, Restart, and Exit                             #################
#####################################################################################################################

# reload sway configuration
bindsym $priMod+Shift+c reload

# exit sway (logs out of X session)
bindsym $priMod+Shift+e exec "swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your X session.' -B 'Yes, exit sway' 'swaymsg exit'"

#####################################################################################################################
#################                                     Services                                      #################
#####################################################################################################################

# include drop-in files
include /etc/sway/config.d/*